<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BayesGuide: The Purist's Prior</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- KaTeX for Math Rendering -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3, h4, .font-serif {
            font-family: 'Crimson Pro', serif;
        }
        .math-tex {
            font-size: 1.1em;
        }
        /* Smooth transition for accordion */
        .answer-section {
            transition: all 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        .answer-section.open {
            max-height: 1000px; /* Arbitrary large height */
            opacity: 1;
        }
        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #2c3e50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        .home-button:hover {
            background: #34495e;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="min-h-screen bg-stone-50 text-stone-800 selection:bg-indigo-100 pb-24">
    <a href="../../index.html" class="home-button">
        ← Home
    </a>

    <!-- Header -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-20 shadow-sm/50 backdrop-blur-sm bg-white/90">
        <div class="max-w-4xl mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="bg-indigo-600 p-1.5 rounded-lg">
                    <i data-lucide="book-open" class="text-white w-5 h-5"></i>
                </div>
                <h1 class="text-xl font-bold text-stone-900 tracking-tight">Bayes<span class="text-indigo-600">Guide</span></h1>
            </div>
            <div class="hidden sm:flex items-center gap-4 text-sm font-medium text-stone-500">
                <span>Statistical Inference II</span>
                <span class="h-4 w-px bg-stone-300"></span>
                <span class="text-indigo-700 bg-indigo-50 px-3 py-1 rounded-full border border-indigo-100">
                    Noninformative Priors
                </span>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-6 py-12 space-y-16">
        
        <!-- Intro Section -->
        <section class="space-y-6 text-center max-w-2xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-serif font-bold text-stone-900 leading-tight">
                The Purist's Prior
            </h2>
            <p class="text-xl text-stone-600 leading-relaxed font-serif italic">
                "When we know nothing, how do we express it mathematically without bias?"
            </p>
            <div class="h-1 w-20 bg-indigo-600 mx-auto rounded-full mt-6"></div>
            <p class="text-stone-600 pt-4 leading-relaxed">
                A derivation of the Haldane Prior from the Natural Parameter of the Exponential Family, 
                and an analysis of why "total ignorance" can lead to "improper" results.
            </p>
        </section>

        <!-- Original Problem Statement -->
        <section class="bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden relative group hover:shadow-md transition-shadow">
            <div class="absolute top-0 left-0 w-1.5 h-full bg-indigo-600"></div>
            <div class="p-6 md:p-8">
                <div class="flex items-center gap-3 mb-6 border-b border-stone-100 pb-4">
                    <span class="bg-indigo-50 text-indigo-700 text-xs font-bold px-2 py-1 rounded uppercase tracking-wider border border-indigo-100">Exercise 7</span>
                    <h3 class="font-serif font-bold text-lg text-stone-900">Noninformative Prior Densities</h3>
                </div>
                
                <div class="space-y-4 text-stone-700 leading-relaxed">
                    <div class="flex gap-4">
                        <span class="font-bold text-stone-900 shrink-0 font-serif">(a)</span>
                        <p>
                            For the binomial likelihood, <span class="math-tex inline" data-tex="y \sim \text{Bin}(n, \theta)"></span>, show that <span class="math-tex inline" data-tex="p(\theta) \propto \theta^{-1}(1-\theta)^{-1}"></span> is the uniform prior distribution for the natural parameter of the exponential family.
                        </p>
                    </div>
                    <div class="flex gap-4">
                        <span class="font-bold text-stone-900 shrink-0 font-serif">(b)</span>
                        <p>
                            Show that if <span class="math-tex inline" data-tex="y = 0"></span> or <span class="math-tex inline" data-tex="n"></span>, the resulting posterior distribution is improper.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Theory Primer -->
        <section class="bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden">
            <div class="bg-stone-900 text-stone-50 p-4 px-6 border-b border-stone-800 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <i data-lucide="graduation-cap" class="w-5 h-5 text-indigo-400"></i>
                    <h3 class="font-bold tracking-wide uppercase text-xs">Theory Primer</h3>
                </div>
            </div>
            
            <div class="p-8 space-y-8">
                <div class="prose prose-stone max-w-none">
                    <h4 class="font-serif text-2xl font-bold text-stone-900 mb-4">The Exponential Family Form</h4>
                    <p class="text-stone-600 leading-relaxed">
                        To find the "neutral" prior, we first map our distribution to the canonical Exponential Family form. 
                        This reveals the geometry of the distribution. The probability density function must satisfy:
                    </p>
                    
                    <div class="bg-stone-50 py-8 px-4 rounded-lg border border-stone-100 flex justify-center my-6 overflow-x-auto">
                        <span class="math-tex block" data-tex="f(y|\theta) = h(y) \cdot \exp\Big( \underbrace{\eta(\theta)}_{\text{Natural Param}} \cdot \underbrace{T(y)}_{\text{Suff. Stat}} - A(\theta) \Big)"></span>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8 pt-4 border-t border-stone-100">
                    <div class="space-y-3">
                        <div class="flex items-center gap-2 text-indigo-700 font-bold font-serif">
                            <i data-lucide="calculator" class="w-4 h-4"></i>
                            <span>The Sufficient Statistic T(y)</span>
                        </div>
                        <p class="text-sm text-stone-600 leading-relaxed">
                            The summary of the data. For a Binomial experiment, <span class="math-tex inline" data-tex="T(y) = y"></span> (the count of heads). It contains all the information needed to estimate <span class="math-tex inline" data-tex="\theta"></span>.
                        </p>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex items-center gap-2 text-indigo-700 font-bold font-serif">
                            <i data-lucide="brain" class="w-4 h-4"></i>
                            <span>The Natural Parameter η(θ)</span>
                        </div>
                        <p class="text-sm text-stone-600 leading-relaxed">
                            Usually denoted as <span class="math-tex inline" data-tex="\phi"></span> or <span class="math-tex inline" data-tex="\eta"></span>. 
                            This parameter interacts linearly with the data. Assuming a uniform prior on <span class="math-tex inline" data-tex="\eta"></span> is often considered the most "uninformative" choice because it respects the natural geometry of the distribution.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Derivation Section -->
        <section>
            <div class="flex items-center gap-3 mb-10">
                <div class="bg-indigo-100 p-2 rounded-full">
                    <i data-lucide="scroll-text" class="w-6 h-6 text-indigo-700"></i>
                </div>
                <h3 class="text-2xl font-serif font-bold text-stone-900">Derivation of the Haldane Prior</h3>
            </div>
            
            <div class="space-y-12 relative before:absolute before:left-5 before:top-4 before:h-full before:w-px before:bg-stone-200 before:content-['']" id="derivation-container">
                <!-- Content will be injected by JS or hardcoded below for pure HTML simplicity -->
                
                <!-- Step 1 -->
                <div class="relative pl-16 step-card" id="step-1">
                    <div class="absolute left-1 top-0 w-9 h-9 rounded-full border-4 flex items-center justify-center font-serif font-bold text-sm bg-white transition-colors z-10 border-indigo-600 text-indigo-600">1</div>
                    <div class="bg-white border border-stone-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                        <div class="p-6 md:p-8">
                            <h4 class="text-lg font-serif font-bold text-stone-900 mb-3">Step 1: The Exponential Transformation</h4>
                            <p class="text-stone-700 leading-relaxed mb-6">Our goal is to find the 'Natural Parameter' (ϕ). To do this, we must force the Binomial PMF into the Exponential Family form. How do we rewrite the probability equation using exponents?</p>
                            
                            <!-- Answer Section (Open by default for Step 1) -->
                            <div class="answer-section open">
                                <div class="bg-stone-50/50 border-t border-stone-100 p-6 md:p-8">
                                    <div class="flex justify-between items-start mb-6">
                                        <span class="text-xs font-bold text-indigo-600 uppercase tracking-widest border border-indigo-200 bg-indigo-50 px-2 py-1 rounded">Solution</span>
                                        <button class="text-stone-400 hover:text-stone-600 p-1 hover:bg-stone-200 rounded transition-colors" onclick="toggleCard('step-1')">
                                            <i data-lucide="chevron-up" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                    <p class="text-stone-800 mb-6 font-medium">We take the log of the probability terms to put them inside the exponential function:</p>
                                    <div class="bg-white border border-stone-200 rounded shadow-inner p-6 mb-6 overflow-x-auto flex justify-center">
                                        <span class="math-tex block" data-tex="\begin{aligned} P(y|\theta) &= \binom{n}{y} \exp\left( \ln(\theta^y (1-\theta)^{n-y}) \right) \\[1.5em] &= \binom{n}{y} \exp\left( y \ln(\theta) + (n-y) \ln(1-\theta) \right) \\[1.5em] &= \binom{n}{y} \exp\left( y \ln\left(\frac{\theta}{1-\theta}\right) + n \ln(1-\theta) \right) \end{aligned}"></span>
                                    </div>
                                    <div class="flex gap-4 items-start">
                                        <div class="h-full w-1 bg-indigo-200 rounded-full shrink-0"></div>
                                        <p class="text-stone-600 text-sm leading-relaxed">Notice the structure: we have isolated 'y' (our sufficient statistic) multiplying a term involving theta. That coefficient is our target.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Trigger Button (Hidden when open) -->
                            <div class="trigger-section hidden flex items-center justify-between mt-6 pt-6 border-t border-stone-100">
                                <div class="flex items-center gap-2 text-sm text-stone-500 italic">
                                    <i data-lucide="info" class="w-4 h-4"></i>
                                    <span>Hint: Use the identity x = exp(ln(x)) to move the theta terms into the exponent.</span>
                                </div>
                                <button onclick="toggleCard('step-1')" class="flex items-center gap-2 text-white bg-indigo-600 font-medium text-sm hover:bg-indigo-700 px-5 py-2.5 rounded-md transition-colors shadow-sm">
                                    Reveal Solution <i data-lucide="chevron-down" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="relative pl-16 step-card" id="step-2">
                    <div class="absolute left-1 top-0 w-9 h-9 rounded-full border-4 flex items-center justify-center font-serif font-bold text-sm bg-white transition-colors z-10 border-stone-300 text-stone-400 marker-circle">2</div>
                    <div class="bg-white border border-stone-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                        <div class="p-6 md:p-8">
                            <h4 class="text-lg font-serif font-bold text-stone-900 mb-3">Step 2: Identifying the Natural Parameter</h4>
                            <p class="text-stone-700 leading-relaxed mb-6">The Exponential Family form is defined as f(y) = h(y) exp(ϕ · T(y) - A(ϕ)). Looking at our result from Step 1, what corresponds to ϕ?</p>
                            
                            <!-- Answer Section -->
                            <div class="answer-section">
                                <div class="bg-stone-50/50 border-t border-stone-100 p-6 md:p-8">
                                    <div class="flex justify-between items-start mb-6">
                                        <span class="text-xs font-bold text-indigo-600 uppercase tracking-widest border border-indigo-200 bg-indigo-50 px-2 py-1 rounded">Solution</span>
                                        <button class="text-stone-400 hover:text-stone-600 p-1 hover:bg-stone-200 rounded transition-colors" onclick="toggleCard('step-2')">
                                            <i data-lucide="chevron-up" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                    <p class="text-stone-800 mb-6 font-medium">The natural parameter is the coefficient of y:</p>
                                    <div class="bg-white border border-stone-200 rounded shadow-inner p-6 mb-6 overflow-x-auto flex justify-center">
                                        <span class="math-tex block" data-tex="\phi = \ln\left(\frac{\theta}{1-\theta}\right)"></span>
                                    </div>
                                    <div class="flex gap-4 items-start">
                                        <div class="h-full w-1 bg-indigo-200 rounded-full shrink-0"></div>
                                        <p class="text-stone-600 text-sm leading-relaxed">This function is the 'logit' or 'log-odds'. In the natural parameter space, the math is linear and simple. The problem assumes a flat uniform prior on this specific parameter.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Trigger Button -->
                            <div class="trigger-section flex items-center justify-between mt-6 pt-6 border-t border-stone-100">
                                <div class="flex items-center gap-2 text-sm text-stone-500 italic">
                                    <i data-lucide="info" class="w-4 h-4"></i>
                                    <span>Hint: Find the term that directly multiplies y inside the exponent.</span>
                                </div>
                                <button onclick="toggleCard('step-2')" class="flex items-center gap-2 text-white bg-indigo-600 font-medium text-sm hover:bg-indigo-700 px-5 py-2.5 rounded-md transition-colors shadow-sm">
                                    Reveal Solution <i data-lucide="chevron-down" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="relative pl-16 step-card" id="step-3">
                    <div class="absolute left-1 top-0 w-9 h-9 rounded-full border-4 flex items-center justify-center font-serif font-bold text-sm bg-white transition-colors z-10 border-stone-300 text-stone-400 marker-circle">3</div>
                    <div class="bg-white border border-stone-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                        <div class="p-6 md:p-8">
                            <h4 class="text-lg font-serif font-bold text-stone-900 mb-3">Step 3: The Change of Variables Rule</h4>
                            <p class="text-stone-700 leading-relaxed mb-6">We have a flat prior on ϕ (p(ϕ) ∝ 1), but we need the prior for θ. We cannot just swap the variables. What is the transformation rule?</p>
                            
                            <!-- Answer Section -->
                            <div class="answer-section">
                                <div class="bg-stone-50/50 border-t border-stone-100 p-6 md:p-8">
                                    <div class="flex justify-between items-start mb-6">
                                        <span class="text-xs font-bold text-indigo-600 uppercase tracking-widest border border-indigo-200 bg-indigo-50 px-2 py-1 rounded">Solution</span>
                                        <button class="text-stone-400 hover:text-stone-600 p-1 hover:bg-stone-200 rounded transition-colors" onclick="toggleCard('step-3')">
                                            <i data-lucide="chevron-up" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                    <p class="text-stone-800 mb-6 font-medium">We multiply by the absolute derivative of the transformation:</p>
                                    <div class="bg-white border border-stone-200 rounded shadow-inner p-6 mb-6 overflow-x-auto flex justify-center">
                                        <span class="math-tex block" data-tex="p(\theta) = p(\phi) \left| \frac{d\phi}{d\theta} \right| \propto 1 \cdot \left| \frac{d\phi}{d\theta} \right|"></span>
                                    </div>
                                    <div class="flex gap-4 items-start">
                                        <div class="h-full w-1 bg-indigo-200 rounded-full shrink-0"></div>
                                        <p class="text-stone-600 text-sm leading-relaxed">Since p(ϕ) is just a constant, the shape of p(θ) depends entirely on how the space stretches (the derivative).</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Trigger Button -->
                            <div class="trigger-section flex items-center justify-between mt-6 pt-6 border-t border-stone-100">
                                <div class="flex items-center gap-2 text-sm text-stone-500 italic">
                                    <i data-lucide="info" class="w-4 h-4"></i>
                                    <span>Hint: Probability mass must be conserved. We need the Jacobian term.</span>
                                </div>
                                <button onclick="toggleCard('step-3')" class="flex items-center gap-2 text-white bg-indigo-600 font-medium text-sm hover:bg-indigo-700 px-5 py-2.5 rounded-md transition-colors shadow-sm">
                                    Reveal Solution <i data-lucide="chevron-down" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="relative pl-16 step-card" id="step-4">
                    <div class="absolute left-1 top-0 w-9 h-9 rounded-full border-4 flex items-center justify-center font-serif font-bold text-sm bg-white transition-colors z-10 border-stone-300 text-stone-400 marker-circle">4</div>
                    <div class="bg-white border border-stone-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                        <div class="p-6 md:p-8">
                            <h4 class="text-lg font-serif font-bold text-stone-900 mb-3">Step 4: Calculating the Derivative</h4>
                            <p class="text-stone-700 leading-relaxed mb-6">Calculate the derivative of the logit function ϕ = ln(θ) - ln(1-θ) with respect to θ.</p>
                            
                            <!-- Answer Section -->
                            <div class="answer-section">
                                <div class="bg-stone-50/50 border-t border-stone-100 p-6 md:p-8">
                                    <div class="flex justify-between items-start mb-6">
                                        <span class="text-xs font-bold text-indigo-600 uppercase tracking-widest border border-indigo-200 bg-indigo-50 px-2 py-1 rounded">Solution</span>
                                        <button class="text-stone-400 hover:text-stone-600 p-1 hover:bg-stone-200 rounded transition-colors" onclick="toggleCard('step-4')">
                                            <i data-lucide="chevron-up" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                    <p class="text-stone-800 mb-6 font-medium">Differentiating both terms:</p>
                                    <div class="bg-white border border-stone-200 rounded shadow-inner p-6 mb-6 overflow-x-auto flex justify-center">
                                        <span class="math-tex block" data-tex="\frac{d\phi}{d\theta} = \frac{d}{d\theta}[\ln(\theta) - \ln(1-\theta)] \\ = \frac{1}{\theta} - \frac{1}{1-\theta}(-1) \\ = \frac{1}{\theta} + \frac{1}{1-\theta} = \frac{1}{\theta(1-\theta)}"></span>
                                    </div>
                                    <div class="flex gap-4 items-start">
                                        <div class="h-full w-1 bg-indigo-200 rounded-full shrink-0"></div>
                                        <p class="text-stone-600 text-sm leading-relaxed">This matches the target form: θ⁻¹(1-θ)⁻¹. This is the Haldane Prior.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Trigger Button -->
                            <div class="trigger-section flex items-center justify-between mt-6 pt-6 border-t border-stone-100">
                                <div class="flex items-center gap-2 text-sm text-stone-500 italic">
                                    <i data-lucide="info" class="w-4 h-4"></i>
                                    <span>Hint: The derivative of ln(x) is 1/x. Don't forget the chain rule for ln(1-θ).</span>
                                </div>
                                <button onclick="toggleCard('step-4')" class="flex items-center gap-2 text-white bg-indigo-600 font-medium text-sm hover:bg-indigo-700 px-5 py-2.5 rounded-md transition-colors shadow-sm">
                                    Reveal Solution <i data-lucide="chevron-down" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Intuition Section -->
        <section class="grid md:grid-cols-2 gap-8">
            <!-- Part 1: The Crash -->
            <div class="bg-amber-50 border border-amber-100 rounded-xl p-6 md:p-8">
                <div class="flex items-center gap-3 mb-6 text-amber-900 border-b border-amber-200/60 pb-4">
                    <i data-lucide="alert-triangle" class="w-6 h-6"></i>
                    <h3 class="font-serif font-bold text-lg">The Problem (Part B)</h3>
                </div>
                <p class="text-amber-900 text-sm mb-4 leading-relaxed">
                    We derived the Haldane Prior <span class="math-tex inline" data-tex="\text{Beta}(0,0)"></span>. 
                    But if we observe <span class="math-tex inline" data-tex="y=0"></span> (no successes), the posterior integral diverges:
                </p>
                <div class="bg-white/80 p-5 rounded-lg border border-amber-200/50 mb-4 shadow-sm">
                    <div class="text-center">
                        <span class="math-tex block" data-tex="\int_0^1 \theta^{-1}(1-\theta)^{n-1} d\theta \to -\infty"></span>
                    </div>
                </div>
                <p class="text-amber-900/80 text-sm italic">
                    Result: The distribution is "Improper." The model is dogmatically certain that successes are impossible, causing the math to break.
                </p>
            </div>

            <!-- Part 2: The Intuition -->
            <div class="bg-emerald-50 border border-emerald-100 rounded-xl p-6 md:p-8">
                <div class="flex items-center gap-3 mb-6 text-emerald-900 border-b border-emerald-200/60 pb-4">
                    <i data-lucide="lightbulb" class="w-6 h-6"></i>
                    <h3 class="font-serif font-bold text-lg">The Intuition</h3>
                </div>
                <p class="text-emerald-900 text-sm mb-6 leading-relaxed">
                    Why use such a risky prior? Think of <span class="math-tex inline" data-tex="\alpha"></span> and <span class="math-tex inline" data-tex="\beta"></span> as <strong>Pseudocounts</strong> (imaginary data).
                </p>
                
                <ul class="space-y-4">
                    <li class="flex gap-4 text-sm text-emerald-900 bg-white/60 p-3 rounded-lg border border-emerald-100/50">
                        <div class="w-24 font-bold font-serif shrink-0 text-emerald-700 pt-1">Beta(1,1)</div>
                        <div>
                            <span class="block font-bold mb-1">The Uniform Prior</span>
                            <span class="opacity-80 leading-relaxed">Adds <strong>1 Head</strong> and <strong>1 Tail</strong>. Safe, but it biases small samples toward 50%.</span>
                        </div>
                    </li>
                    <li class="flex gap-4 text-sm text-emerald-900 bg-white/60 p-3 rounded-lg border border-emerald-100/50">
                        <div class="w-24 font-bold font-serif shrink-0 text-emerald-700 pt-1">Beta(0,0)</div>
                        <div>
                            <span class="block font-bold mb-1">The Haldane Prior</span>
                            <span class="opacity-80 leading-relaxed">Adds <strong>0 Heads</strong> and <strong>0 Tails</strong>. It adds zero weight to the scale. It is the "Purist" choice.</span>
                        </div>
                    </li>
                </ul>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="border-t border-stone-200 bg-white py-12 mt-12">
        <div class="max-w-4xl mx-auto px-6 text-center text-stone-400 text-sm">
            <p class="font-serif italic mb-2">"Probability is the language of uncertainty."</p>
            <p>© 2025 Study Assistant. Generated for educational purposes.</p>
        </div>
    </footer>

    <script>
        // Initialize Icons
        lucide.createIcons();

        // Initialize Math
        document.addEventListener("DOMContentLoaded", function() {
            const mathElements = document.getElementsByClassName('math-tex');
            Array.from(mathElements).forEach((element) => {
                const tex = element.getAttribute('data-tex');
                const isBlock = element.classList.contains('block');
                try {
                    katex.render(tex, element, {
                        throwOnError: false,
                        displayMode: isBlock
                    });
                } catch (err) {
                    console.error(err);
                    element.textContent = tex; // Fallback
                }
            });
        });

        // Toggle Logic for Accordion
        function toggleCard(stepId) {
            const card = document.getElementById(stepId);
            const answerSection = card.querySelector('.answer-section');
            const triggerSection = card.querySelector('.trigger-section');
            const marker = card.querySelector('.marker-circle'); // The number bubble
            
            if (answerSection.classList.contains('open')) {
                // Close it
                answerSection.classList.remove('open');
                triggerSection.classList.remove('hidden');
                
                // Update marker color if it exists (step 1 is hardcoded to open/blue initially)
                if (marker) {
                    marker.classList.remove('border-indigo-600', 'text-indigo-600');
                    marker.classList.add('border-stone-300', 'text-stone-400');
                }
                
            } else {
                // Open it
                answerSection.classList.add('open');
                triggerSection.classList.add('hidden');
                
                // Update marker color
                if (marker) {
                    marker.classList.remove('border-stone-300', 'text-stone-400');
                    marker.classList.add('border-indigo-600', 'text-indigo-600');
                }
            }
        }
    </script>
</body>
</html>