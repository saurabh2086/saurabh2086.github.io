<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bayesian Normal-Normal Model Analysis</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    
    <!-- KaTeX JS -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>

    <style>
        /* Custom tweaks for math blocks */
        .math-display {
            display: block;
            margin: 1rem 0;
            text-align: center;
            overflow-x: auto;
            overflow-y: hidden;
        }
        .math-inline {
            display: inline-block;
        }
        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #2c3e50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        .home-button:hover {
            background: #34495e;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-800 p-4 md:p-8 min-h-screen">
    <a href="../../index.html" class="home-button">
        ‚Üê Home
    </a>
    <div class="max-w-4xl mx-auto space-y-8">
        
        <!-- Header -->
        <header class="text-center space-y-4 py-8 border-b border-slate-200">
            <div class="inline-flex items-center space-x-2 text-indigo-600 font-bold uppercase tracking-wider text-xs bg-indigo-50 px-3 py-1 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                    <path d="M6 12v5c3 3 9 3 12 0v-5"/>
                </svg>
                <span>Problem 8 Analysis</span>
            </div>
            <h1 class="text-4xl font-extrabold text-slate-900">Bayesian Normal-Normal Model</h1>
            <p class="text-lg text-slate-600 max-w-2xl mx-auto">
                A comprehensive solution derived from first principles.
            </p>
        </header>

        <!-- 1. Original Question -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden p-8 border-l-4 border-l-indigo-600">
            <h2 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">Original Question</h2>
            <div class="prose prose-slate max-w-none">
                <p class="text-lg font-serif italic text-slate-800 leading-relaxed">
                    "Normal distribution with unknown mean: a random sample of <span class="latex">n</span> students is drawn from a large population, and their weights are measured. The average weight of the <span class="latex">n</span> sampled students is <span class="latex">\bar{y} = 150</span> pounds. Assume the weights in the population are normally distributed with unknown mean <span class="latex">\theta</span> and known standard deviation <span class="latex">20</span> pounds. Suppose your prior distribution for <span class="latex">\theta</span> is normal with mean <span class="latex">180</span> and standard deviation <span class="latex">40</span>."
                </p>
            </div>
        </div>

        <!-- 2. Detailed Solution -->
        <div class="space-y-6">
            <div class="flex items-center justify-between border-b border-slate-200 pb-2">
                <h2 class="text-2xl font-bold text-slate-900">Detailed Solution</h2>
                <span class="text-sm text-slate-500">Step-by-step Walkthrough</span>
            </div>

            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden p-8">
                
                <!-- Section A -->
                <div class="flex items-center space-x-3 mb-4 mt-8">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-indigo-600 text-white font-bold rounded-full text-sm">A</div>
                    <h3 class="text-xl font-bold text-slate-900">Posterior Distribution for <span class="latex">\theta</span></h3>
                </div>
                
                <div class="space-y-4 text-slate-600 leading-relaxed">
                    <p>
                        To find the posterior, we use Bayes' Theorem:
                        <span class="latex" data-display="true">P(\theta|y) \propto P(y|\theta) P(\theta)</span>
                    </p>
                    
                    <h4 class="font-bold text-slate-800 mt-4">1. Identify the Components</h4>
                    <ul class="list-disc list-inside ml-4 space-y-1">
                        <li><strong>Prior:</strong> Our belief about <span class="latex">\theta</span> is <span class="latex">\theta \sim N(180, 40^2)</span>.</li>
                        <li><strong>Likelihood:</strong> The sample mean <span class="latex">\bar{y}</span> follows <span class="latex">N(\theta, \sigma^2/n)</span>. With <span class="latex">\sigma=20</span>, the variance is <span class="latex">400/n</span>.</li>
                    </ul>

                    <h4 class="font-bold text-slate-800 mt-4">2. Kernel Method</h4>
                    <p>We write down the exponential parts (kernels) of the distributions, ignoring constants:</p>
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-100 shadow-inner">
                        <div class="mb-2"><strong>Prior Kernel:</strong></div>
                        <span class="latex" data-display="true">\exp\left[ -\frac{1}{2} \left(\frac{\theta - 180}{40}\right)^2 \right]</span>
                        <div class="mb-2 mt-4"><strong>Likelihood Kernel:</strong></div>
                        <span class="latex" data-display="true">\exp\left[ -\frac{1}{2} \frac{(\bar{y} - \theta)^2}{20^2/n} \right] = \exp\left[ -\frac{n}{2} \left(\frac{150 - \theta}{20}\right)^2 \right]</span>
                    </div>
                    
                    <h4 class="font-bold text-slate-800 mt-4">3. Completing the Square</h4>
                    <p>Combining the exponents, we identify the coefficient of <span class="latex">\theta^2</span> (which gives us the precision) and the linear coefficient of <span class="latex">\theta</span> (which helps us find the mean).</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-4">
                        <div class="bg-indigo-50 p-4 rounded-lg">
                            <span class="text-xs font-bold text-indigo-600 uppercase">New Precision (1/Variance)</span>
                            <div class="bg-white bg-opacity-60 p-2 rounded mt-2 text-sm text-center">
                                <span class="latex" data-display="true">\frac{1}{\sigma_{post}^2} = \frac{1}{40^2} + \frac{n}{20^2}</span>
                                <span class="latex" data-display="true">\sigma_{post}^2 = \frac{1600}{1 + 4n}</span>
                            </div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <span class="text-xs font-bold text-green-600 uppercase">New Mean (Weighted Average)</span>
                            <div class="bg-white bg-opacity-60 p-2 rounded mt-2 text-sm text-center">
                                <span class="latex" data-display="true">\mu_{post} = \sigma_{post}^2 \left[ \frac{180}{40^2} + \frac{150 \cdot n}{20^2} \right]</span>
                                <span class="latex" data-display="true">\mu_{post} = \frac{180 + 600n}{1 + 4n}</span>
                            </div>
                        </div>
                    </div>
                    
                    <p class="font-semibold text-slate-800 border-t border-slate-100 pt-4">Final Answer for (a):</p>
                    <p>
                        The posterior distribution is Normal with mean <span class="latex">\frac{180 + 600n}{1 + 4n}</span> and variance <span class="latex">\frac{1600}{1 + 4n}</span>.
                    </p>
                </div>

                <!-- Section B -->
                <div class="flex items-center space-x-3 mb-4 mt-8">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-indigo-600 text-white font-bold rounded-full text-sm">B</div>
                    <h3 class="text-xl font-bold text-slate-900">Posterior Predictive Distribution for <span class="latex">\tilde{y}</span></h3>
                </div>

                <div class="space-y-4 text-slate-600 leading-relaxed">
                    <p>
                        We want to predict the weight of a <em>new</em> student, <span class="latex">\tilde{y}</span>. This student comes from the population <span class="latex">N(\theta, 20^2)</span>.
                    </p>
                    <div>
                        There are two independent sources of uncertainty:
                        <ol class="list-decimal list-inside ml-4 mt-2 space-y-1">
                            <li>We don't know the true mean <span class="latex">\theta</span> (Posterior Variance).</li>
                            <li>Students vary naturally around the mean (Population Variance <span class="latex">20^2</span>).</li>
                        </ol>
                    </div>
                    <p>We add the variances:</p>
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-100 shadow-inner text-center">
                        <span class="latex" data-display="true">\text{Var}(\tilde{y}) = \text{Var}(\theta|y) + \text{Var}(\text{student})</span>
                        <span class="latex" data-display="true">\text{Var}(\tilde{y}) = \frac{1600}{1 + 4n} + 400</span>
                    </div>
                    <p class="font-semibold text-slate-800 border-t border-slate-100 pt-4">Final Answer for (b):</p>
                    <p>
                        The predictive distribution is Normal with mean equal to the posterior mean, and variance <span class="latex">\frac{1600}{1+4n} + 400</span>.
                    </p>
                </div>

                <!-- Section C -->
                <div class="flex items-center space-x-3 mb-4 mt-8">
                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-indigo-600 text-white font-bold rounded-full text-sm">C</div>
                    <h3 class="text-xl font-bold text-slate-900">95% Intervals (n = 10)</h3>
                </div>

                <div class="space-y-4 text-slate-600 leading-relaxed">
                    <p>Plugging <span class="latex">n=10</span> into our derived formulas:</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="border border-slate-200 rounded-lg p-4">
                            <h5 class="font-bold text-slate-800 mb-2">Posterior Interval for <span class="latex">\theta</span></h5>
                            <ul class="text-sm space-y-1 mb-2">
                                <li>Mean: <span class="latex">(180 + 6000)/41 \approx 150.73</span></li>
                                <li>Variance: <span class="latex">1600/41 \approx 39.02</span></li>
                                <li>SD: <span class="latex">\sqrt{39.02} \approx 6.25</span></li>
                            </ul>
                            <div class="bg-slate-100 p-2 rounded text-center text-slate-800">
                                <span class="latex">150.73 \pm (1.96 \times 6.25)</span>
                                <div class="font-bold mt-1">[138.48, 162.98]</div>
                            </div>
                        </div>

                        <div class="border border-slate-200 rounded-lg p-4">
                            <h5 class="font-bold text-slate-800 mb-2">Predictive Interval for <span class="latex">\tilde{y}</span></h5>
                            <ul class="text-sm space-y-1 mb-2">
                                <li>Mean: <span class="latex">150.73</span></li>
                                <li>Variance: <span class="latex">39.02 + 400 = 439.02</span></li>
                                <li>SD: <span class="latex">\sqrt{439.02} \approx 20.95</span></li>
                            </ul>
                            <div class="bg-slate-100 p-2 rounded text-center text-slate-800">
                                <span class="latex">150.73 \pm (1.96 \times 20.95)</span>
                                <div class="font-bold mt-1">[109.67, 191.79]</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Function to render math once KaTeX is loaded
            function renderMath() {
                if (window.katex) {
                    const mathElements = document.querySelectorAll('.latex');
                    mathElements.forEach(el => {
                        const formula = el.textContent;
                        // Check if it's display mode based on data attribute
                        const displayMode = el.getAttribute('data-display') === 'true';
                        
                        katex.render(formula, el, {
                            throwOnError: false,
                            displayMode: displayMode
                        });
                    });
                } else {
                    // Retry if KaTeX hasn't loaded yet
                    setTimeout(renderMath, 100);
                }
            }

            renderMath();
        });
    </script>
</body>
</html>